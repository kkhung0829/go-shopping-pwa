(this["webpackJsonpgo-shopping-pwa"]=this["webpackJsonpgo-shopping-pwa"]||[]).push([[0],{155:function(e,t,n){"use strict";n.r(t);var a=n(215),r=n.n(a);t.default=r()({SHOPPING_ITEM_ADD:null,SHOPPING_ITEM_DEL:null,SHOPPING_ITEM_UPDATE:null,SHOPPING_ITEM_INC_UNIT:null,SHOPPING_ITEM_DEC_UNIT:null,SHOPPING_ITEM_CLEAR:null})},249:function(e,t,n){e.exports=n(421)},254:function(e,t,n){},421:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"selectItems",(function(){return B})),n.d(a,"makeSelectItemById",(function(){return F})),n.d(a,"selectTotalCost",(function(){return $}));var r={};n.r(r),n.d(r,"shoppingItemAdd",(function(){return ee})),n.d(r,"shoppingItemDel",(function(){return te})),n.d(r,"shoppingItemUpdate",(function(){return ne})),n.d(r,"shoppingItemIncUnit",(function(){return ae})),n.d(r,"shoppingItemDecUnit",(function(){return re})),n.d(r,"shoppingItemClear",(function(){return ie}));var i=n(0),o=n.n(i),c=n(33),u=n.n(c),l=(n(254),n(27)),s=n(209),d=n(25),m=n(105),f=n(210),p=n.n(f),I=n(211),E=n.n(I),g=n(212),h=n.n(g),b=n(34),O=n(213),P=n(237),v=n(214),j=n(238),_=function(e){function t(e){return Object(O.a)(this,t),Object(P.a)(this,Object(v.a)(t).call(this,Object.assign({},e,{id:e&&e.id||Math.random().toString()})))}return Object(j.a)(t,e),t}(Object(b.Record)({id:null,name:null,unitPrice:0,numUnit:1,imgURI:null})),S=Object(b.Record)({items:Object(b.List)()},"ShoppingInitialState"),C=n(155).default,U=C.SHOPPING_ITEM_ADD,T=C.SHOPPING_ITEM_DEL,N=C.SHOPPING_ITEM_UPDATE,w=C.SHOPPING_ITEM_INC_UNIT,k=C.SHOPPING_ITEM_DEC_UNIT,y=C.SHOPPING_ITEM_CLEAR,M=new S,H={shopping:new S},D=Object(d.c)({shopping:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return e.updateIn(["items"],(function(e){var n=new _({name:t.data.name,unitPrice:t.data.unitPrice,numUnit:t.data.numUnit,imgURI:t.data.imgURI});return e.unshift(n)}));case T:return e.updateIn(["items"],(function(e){return e.filter((function(e){return e.id!==t.data}))}));case N:return e.updateIn(["items"],(function(e){return e.map((function(e){return e.getIn(["id"])===t.data.id?e.merge(t.data):e}))}));case w:return e.updateIn(["items"],(function(e){return e.map((function(e){return e.getIn(["id"])===t.data?e.updateIn(["numUnit"],(function(e){return e+1})):e}))}));case k:return e.updateIn(["items"],(function(e){return e.map((function(e){return e.getIn(["id"])===t.data&&e.getIn(["numUnit"])>0?e.updateIn(["numUnit"],(function(e){return e-1})):e}))}));case y:return e.updateIn(["items"],(function(e){return Object(b.List)()}));default:return e}}});var A=n(28),G=n(431),R=n(435),L=n(422),x=n(98),W=n(106),B=Object(W.a)((function(e){return e.shopping}),(function(e){return e.getIn(["items"])})),F=function(){return Object(W.a)(B,(function(e,t){return t}),(function(e,t){return e.find((function(e){return e.id===t}))}))},$=Object(W.a)([B],(function(e){return e.reduce((function(e,t){return e+t.unitPrice*t.numUnit}),0)})),z=n(236),J=n(51),X=n(155).default,q=X.SHOPPING_ITEM_ADD,K=X.SHOPPING_ITEM_DEL,Q=X.SHOPPING_ITEM_UPDATE,V=X.SHOPPING_ITEM_INC_UNIT,Y=X.SHOPPING_ITEM_DEC_UNIT,Z=X.SHOPPING_ITEM_CLEAR;function ee(e,t,n,a){return{type:q,data:{name:e,unitPrice:t,numUnit:n,imgURI:a}}}function te(e){return{type:K,data:e}}function ne(e,t,n,a,r){return{type:Q,data:{id:e,name:t,unitPrice:n,numUnit:a,imgURI:r}}}function ae(e){return{type:V,data:e}}function re(e){return{type:Y,data:e}}function ie(){return{type:Z}}var oe=n(433),ce=n(432),ue=n(430),le=n(216),se=n.n(le);n(268);function de(e){return o.a.createElement(oe.a,{open:e.open,onClose:e.onClose},o.a.createElement(se.a,{onTakePhotoAnimationDone:function(t){e.onTakePhoto(t),e.onClose()}}))}function me(e){var t=Object(i.useMemo)(a.makeSelectItemById,[]),n=Object(l.c)((function(n){return t(n,e.id)})),c=Object(l.b)(),u=Object(i.useState)(""),s=Object(A.a)(u,2),d=s[0],m=s[1],f=Object(i.useState)(0),p=Object(A.a)(f,2),I=p[0],E=p[1],g=Object(i.useState)(1),h=Object(A.a)(g,2),b=h[0],O=h[1],P=Object(i.useState)(null),v=Object(A.a)(P,2),j=v[0],_=v[1],S=Object(i.useState)(!1),C=Object(A.a)(S,2),U=C[0],T=C[1],N=Object(i.useState)(!1),w=Object(A.a)(N,2),k=w[0],y=w[1];function M(e){var t;void 0!==(t=e)&&null!==t?(m(e.name?e.name:""),E(e.unitPrice),O(e.numUnit),_(e.imgURI),y(!0)):(m(""),E(0),O(1),_(null),y(!1))}return Object(i.useEffect)((function(){M(n)}),[n,e.id]),o.a.createElement(oe.a,{open:e.open,onClose:function(){M(null),e.onClose()},size:"small",dimmer:"inverted"},o.a.createElement(oe.a.Header,null,k?"Edit":"Add"),o.a.createElement(oe.a.Content,null,o.a.createElement(ce.a,null,o.a.createElement(ce.a.Field,null,o.a.createElement("label",null,"Name"),o.a.createElement(ue.a,{type:"text",value:d,onChange:function(e){return m(e.target.value)}})),o.a.createElement(ce.a.Field,null,o.a.createElement("label",null,"Unit Price"),o.a.createElement(ue.a,{type:"number",value:I,onChange:function(e){return E(Number(e.target.value))}})),o.a.createElement(ce.a.Field,null,o.a.createElement("label",null,"Num Unit"),o.a.createElement(ue.a,{type:"number",value:b,onChange:function(e){return O(Number(e.target.value))}})),o.a.createElement(ce.a.Field,null,o.a.createElement("label",null,"Photo"),o.a.createElement(L.a,{icon:"camera",fluid:!0,onClick:function(){return T(!0)}}),o.a.createElement(z.a,{src:j})))),o.a.createElement(oe.a.Actions,null,o.a.createElement(L.a,{floated:"left",icon:"save",onClick:function(){c(k?r.shoppingItemUpdate(n.id,d,I,b,j):r.shoppingItemAdd(d,I,b,j)),M(null),e.onClose()}}),o.a.createElement(L.a,{floated:"right",icon:"cancel",onClick:function(){M(null),e.onClose()}})),o.a.createElement(de,{open:U,onClose:function(){setTimeout((function(){T(!1)}),0)},onTakePhoto:function(e){_(e)}}))}function fe(e){var t=Object(i.useMemo)(a.makeSelectItemById,[]),n=Object(l.c)((function(n){return t(n,e.id)})),c=Object(l.b)(),u=Object(i.useState)(!1),s=Object(A.a)(u,2),d=s[0],m=s[1];return o.a.createElement(R.a,{key:n.id},o.a.createElement(R.a.Content,{onClick:function(){return m(!0)}},n.imgURI?o.a.createElement(z.a,{floated:"left",size:"mini",src:n.imgURI}):o.a.createElement(z.a,{floated:"left"},o.a.createElement(J.a,{name:"photo"})),o.a.createElement(L.a,{floated:"right",icon:"trash",circular:!0,onClick:function(){return c(r.shoppingItemDel(n.id))}}),o.a.createElement(R.a.Header,null,o.a.createElement(x.a,{value:n.unitPrice*n.numUnit,displayType:"text",thousandSeparator:!0,prefix:"$",decimalScale:1})),o.a.createElement(R.a.Meta,null,"@ $",n.unitPrice," X ",n.numUnit)),o.a.createElement(R.a.Content,{extra:!0},o.a.createElement("div",{className:"ui two buttons"},o.a.createElement(L.a,{basic:!0,color:"green",onClick:function(){return c(r.shoppingItemIncUnit(n.id))}},"+"),o.a.createElement(L.a,{basic:!0,color:"red",onClick:function(){return c(r.shoppingItemDecUnit(n.id))}},"-"))),o.a.createElement(me,{id:n.id,open:d,onClose:function(){setTimeout((function(){m(!1)}),0)}}))}function pe(){var e=Object(l.c)(a.selectItems),t=Object(l.c)(a.selectTotalCost),n=Object(i.useState)(!1),r=Object(A.a)(n,2),c=r[0],u=r[1],s=e.map((function(e){return o.a.createElement(fe,{key:e.id,id:e.id})})),d=Object(i.createRef)();return o.a.createElement("div",{ref:d},o.a.createElement(G.a,{context:d},o.a.createElement(R.a,{fluid:!0},o.a.createElement(R.a.Content,null,o.a.createElement(L.a,{floated:"right",onClick:function(){return u(!0)}},"+"),o.a.createElement(R.a.Header,null,o.a.createElement(x.a,{value:t,displayType:"text",thousandSeparator:!0,prefix:"Total: $",decimalScale:1}))))),o.a.createElement("div",null,o.a.createElement(R.a.Group,{centered:!0},s)),o.a.createElement(me,{open:c,onClose:function(){return u(!1)}}))}var Ie=function(){var e={transforms:[p()({records:[S,_]})],key:"shopping",storage:E.a,stateReconciler:h.a},t=Object(m.persistReducer)(e,D),n=Object(d.d)(t,H,d.a.apply(void 0,[]));return{store:n,persistor:Object(m.persistStore)(n,null,(function(){}))}}(),Ee=Ie.store,ge=Ie.persistor;var he=function(){return o.a.createElement(l.a,{store:Ee},o.a.createElement(s.a,{loading:null,persistor:ge},o.a.createElement(pe,null)))},be=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Oe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(420);u.a.render(o.a.createElement(he,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/go-shopping-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/go-shopping-pwa","/service-worker.js");be?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Oe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Oe(t,e)}))}}()}},[[249,1,2]]]);
//# sourceMappingURL=main.e126843d.chunk.js.map